Introduction
------------
Le système d'archivage SAP, conçu par Alexandre Pukall, est l'outil utilisé
par les émulateurs Thomson pour manipuler de façon souple et sécurisée les
disquettes 3"5 ou 5"25 au format Thomson. L'idée directrice de SAP est de
reproduire les disquettes physiques Thomson sous forme de fichiers "images",
stockables sur disque dur et lisibles directement par les émulateurs: toutes
les opérations de lecture/écriture sont ainsi réalisées sur ces images et
non pas sur les disquettes originales.

Ce système permet de copier facilement les disquettes, de les diffuser par
tout moyen numérique et assure in fine la préservation de leurs données au
delà de la durée de vie du support physique.

L'utilitaire SAPfs permet de réaliser sur les archives SAP les opérations
naturelles d'un système de fichiers: création, formatage, vérification, dump
binaire, listage des fichiers, extraction de fichiers, ajout de fichiers et
destruction de fichiers.


Comment l'obtenir ?
-------------------
En le téléchargeant depuis la page Web:
http://nostalgies.thomsonistes.org/utilitaires.html


Fonctionnement du programme
---------------------------
SAPfs fonctionne en mode batch: une commande éventuellement suivie d'un ou
plusieurs arguments doit lui être passée sur la ligne de commandes.


Commandes du programme
----------------------
Une des commandes suivantes doit être passée à SAPfs comme premier argument:

  -h, --help
                    affiche l'aide en ligne du programme.
                    ex:  sapfs --help

  -v, --version
                    affiche la version du programme.
                    ex:  sapfs --version

  -w, --verify archive [piste] [secteur]
                    vérifie l'intégrité d'une archive SAP et affiche le
                    détail des erreurs pour chaque secteur défectueux.
                    archive : nom complet de l'archive SAP
                    piste : dernière piste pour la vérification
                    secteur : numéro du secteur (de 1 à 16)
                    ex:  sapfs --verify foo.sap
                         sapfs --verify foo.sap 10

  -u, --dump archive [piste] [secteur]
                    effectue un dump binaire de l'archive SAP.
                    archive : nom complet de l'archive SAP
                    piste : dernière piste pour le dump
                    secteur : numéro du secteur (de 1 à 16)
                    ex:  sapfs --dump foo.sap 20 2
                         sapfs --dump foo.sap 10

  -t, --list archive
                    affiche la liste des fichiers de l'archive SAP.
                    archive : nom complet de l'archive SAP
                    ex:  sapfs --list foo.sap

  -i, --info archive fichier
                    affiche les informations relatives à un fichier. La
                    casse est prise en compte.
                    archive : nom complet de l'archive SAP
                    fichier : nom du fichier à examiner
                    ex:  sapfs --info foo.sap AUTO.BAT

  -x, --extract archive fichier [fichier...]
                    extrait un ou plusieurs fichiers de l'archive SAP. Le
                    nom de fichier peut contenir les wildcards '*' et '?'.
                    La casse est prise en compte.
                    archive : nom complet de l'archive SAP
                    fichier : nom du (des) fichier(s) à extraire
                    ex:  sapfs --extract foo.sap BAR.BIN
                         sapfs --extract foo.sap Prog.BAS Prog.BIN
                         sapfs --extract foo.sap *.DAT

      --extract-all archive
                    extrait tous les fichiers de l'archive SAP.
                    archive : nom complet de l'archive SAP
                    ex:  sapfs --extract-all foo.sap

  -a, --add archive fichier [fichier...] [répertoire...]
                    ajoute un ou plusieurs fichiers à l'archive SAP. La
                    casse est prise en compte.
                    archive : nom complet de l'archive SAP
                    fichier ou répertoire : fichier(s) ou répertoire(s) à
                                            ajouter
                    ex:  sapfs --add foo.sap BAR.BIN
                         sapfs --add foo.sap Prog.BAS Prog.BIN

  -d, --delete archive fichier [fichier...]
                    efface un ou plusieurs fichiers de l'archive SAP. Le
                    nom de fichier peut contenir les wildcards '*' et '?'.
                    La casse est prise en compte.
                    archive : nom complet de l'archive SAP
                    fichier : fichier(s) à effacer
                    ex:  sapfs --delete foo.sap B?R.BIN
                         sapfs --delete foo.sap thom.bas son.bas
                         sapfs --delete foo.sap LEVEL*.DAT

  -c, --create archive [nb pistes] [densité]
                    crée une archive SAP vide (mais formatée).
                    archive : nom complet de l'archive SAP
                    nb_pistes : nombre de pistes (40 ou 80, 80 par défaut)
                    densité : 1 = simple densité
                              2 = double densité (par défaut)
                    ex:  sapfs --create foo.sap
                    ex:  sapfs --create foo.sap 40

  -f, --format archive.sap [nb pistes] [densité]
                    formate l'archive SAP.
                    archive : nom complet de l'archive SAP
                    nb_pistes : nombre de pistes (40 ou 80, 80 par défaut)
                    densité : 1 = simple densité
                              2 = double densité (par défaut)
                    ex:  sapfs --format foo.sap
                    ex:  sapfs --format foo.sap 40

  -k, --copy archive1 archive2 [piste] [secteur]
                    duplique une archive SAP.
                    archive1 : archive SAP source
                    archive2 : archive SAP destination
                    piste : numéro de la dernière piste
                    secteur : numéro du secteur (de 1 à 16)
                    ex:  sapfs --copy foo.sap bar.sap 65
                         sapfs --copy foo.sap bar.sap 20 3

  -m, --move archive1 piste secteur archive2 piste secteur
                    copie le contenu d'un secteur.
                    archive1 : archive SAP source
                    archive2 : archive SAP destination
                    piste : numéro de la piste
                    secteur : numéro du secteur (de 1 à 16)
                    ex:  sapfs --move foo.sap 12 4 bar.sap 26 16

